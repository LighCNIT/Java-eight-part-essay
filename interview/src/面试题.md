### 单核cpu下是否有线程安全问题？
先说答案：会有（非原子操作）
影响线程安全的三大问题：可见性，原子性，有序性
如果非原子操作，必然是有线程安全问题。
但不存在可见性问题，因为只有一份共享内存。
### mysql 什么情况下会产生死锁？
- 两个或两个以上的事务
- 每个事务都已经持有锁并且申请新的锁
- 锁资源同时只能被同一个事务持有或者不兼容
- 事务之间因为持有锁和申请锁导致彼此循环等待
### mysql如何避免死锁？
- 合理的设计索引，区分度高的放到组合索引前面，尽可能的通过索引定位很少的行，减少锁竞争
- 调整业务逻辑SQL执行顺序，避免update/delete长时间持有锁的SQL在事务前面
- 避免大事务，尽量将大事务拆成多个小事务执行
- 以固定的顺序访问表和行。比如两个更新数据的事务，事务 A 更新数据的顺序为 1，2;事务 B 更新数据的顺序为 2，1。这样更可能会造成死锁。
