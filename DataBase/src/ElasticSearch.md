### 如何做ES优化的
- 适当增加分片数量：分片过多会导致检索打开文件过多，多台服务器通讯也会影响性能；分片过少会导致单个索引分片过大，影响检索效率；建议单个分片20G左右，分片数量=数据总量/20G
- 设置合理的副本数：增加副本可以提升搜索效率但过多也不行，因为主分片要同步数据给所有副本分片，过多会占用磁盘资源
- 定时对索引进行合并优化，segment越多，占用的segment memory越多，查询性能也越差。
  - 索引量不大的情况下，可以将segment设置为1.
  - 在es2.1.0以前使用_optimiize接口，后期改为_forcemerge接口。
- 优化索引_all
- 日志优化
### ES为什么快？
- ES是基于Lucene开发的一个全文搜索引擎，一方面Lucene是擅长管理大量的索引数据；另一方面它会对数据进行分词以后再保存索引。这样，能够提升数据的检查效率
- ES采用了倒排索引，所谓倒排索引就是通过属性值来确定数据记录位置的索引，从而避免全表扫描的问题。
- ES存储数据采用了分片机制
- ES扩展性很好，支持通过水平扩展的方式来动态增加节点，从而提升ES的处理性能。能够支持上百台服务器节点的扩展，并且支持TB级别的结构化数据和非结构化数据。
- ES内部提供的数据汇总和索引生命周期管理的功能，更加便于高效地存储和检索数据。